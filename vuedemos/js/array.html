<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>js中array操作函数</title>
</head>

<body>
    <script type="text/javascript">
        //ES5数组方法
        /*
        * join
        * 说明：将数组的元素组起一个字符串，以Separator为分隔符，默认使用逗号分隔。
        */
        //demo1
        var arr = [1, 2, 3];
        console.log(arr.join('-'));
        //demo2
        function repeatString(str, times) {
            //把需要重复的字符传当成分隔符处理
            return new Array(times + 1).join(str);
        }
        /*
        * push & pop
        * 说明：
        * push接收任意数量的参数，把他们诸葛添加到数组末尾，并返回修改后数组长度。
        * pop:数组末尾移除最后一项，减少数组的长度，并返回移除项。
        */
        console.log("push前：" + arr.length);
        var count = arr.push({ name: 'shenhx' }, { name: 'shen' });
        console.log("push后：" + count);
        var endItem = arr.pop();
        console.log(endItem);
        console.log(endItem.name);
        console.log("pop后：" + arr.length);
        /*
        * shift & unshift
        * 说明：
        * shift:删除数组的第一项，并返回删除元素的值，如果数组为空则返回undefined。
        * unshift:将参数添加到数组开头，并返回数组的长度。
        * 跟pop和push方法正好相反，一个操作开头，一个操作数组结尾。
        */
        arr = [];//将数组置空
        console.log("shift前：" + arr.length);
        var firstItem = arr.shift();
        console.log(firstItem);
        var count = arr.unshift({ name: 'shenhx' }, { name: 'shen' });
        console.log("unshift" + arr.length);
        firstItem = arr.shift();
        console.log(firstItem);
        console.log("shift后：" + arr.length);
        /*
        * sort
        * 说明：
        * sort：按升序排序数组项，最小的值位于前面。
        * 在排序时，sort()方法会调用每个数组项的 toString()转型方法，然后比较得到的字符串，以确定如何排序。
        */
        //demo1
        arr = [2, 13, 1, 11, 4, 21, 15];
        arr.sort();
        console.log(arr);
        //demo2
        //如果不想采用默认的sort,sort方法可以接收一个比较函数作为回调函数。
        function compare(val1, val2) {
            if (val1 < val2) {
                return -1;
            } else if (val1 > val2) {
                return 1;
            } else {
                return 0;
            }
        }
        arr.sort(compare);
        console.log(arr);
        /*
        * reverse
        * 说明：
        * 反转数组项顺序
        */
        console.log(arr);
        console.log(arr.reverse());
        /*
        * concat
        * 说明：
        * 将参数添加到原数组中。
        * 有参数情况下，将接收的参数添加到创建副本的末尾，并返回副本。
        * 没有参数的情况下，返回当前数组复制的副本。
        */
        var arrCopy = arr.concat();
        arrCopy.push({ name: 'shenhx' });
        console.log("原数组" + arr.join('-'));
        console.log("数组concat创建的副本" + arrCopy.join('-'));
        /*
        * slice
        * 说明：
        * slice：返回从原数组中指定开始下标到结束下标之间的项组成的新数组。
        * 下标为负数的情况：负数+数组长度找到定位下标
        */
        console.log(arr);
        console.log(arr.slice(-3, -2));
        console.log(arr.slice(1, -1));
        /*
        * splice
        * 说明：
        * splice:很强大的数组方法，它有很多种用法，可以实现删除、插入和替换。
        */
        console.log('splice');
        arr = [1, 2, 3, 4, 5, 6, 7, 8, 9];
        //删除：
        console.log('src' + arr);
        console.log(arr.splice(0, 2));
        //插入：
        console.log('src' + arr);
        console.log(arr.splice(0, 0, 1, 2, 3));
        //替换：
        console.log('src' + arr);
        console.log(arr.splice(4, 1, 1, 2, 3));
        console.log('src' + arr);
        /*
        * indexof & lastIndexOf
        * 说明：
        * indexOf()：接收两个参数：要查找的项和（可选的）表示查找起点位置的索引。其中， 从数组的开头（位置 0）开始向后查找。 
        * lastIndexOf：接收两个参数：要查找的项和（可选的）表示查找起点位置的索引。其中， 从数组的末尾开始向前查找。
        * 如果找不到，返回-1。
        */
        arr = [1, 2, 553, 54, 5, 6, 7, 8, 9];
        console.log(arr.indexOf(3));
        console.log(arr.lastIndexOf(3));
        console.log(arr.lastIndexOf(12));
        /*
        * forEach
        * 说明：
        * forEach()：对数组进行遍历循环，对数组中的每一项运行给定函数。这个方法没有返回值。
        */
        arr.forEach(function (x, index, n) {
            console.log(x + '|' + index + '|' + (n === arr));
        });
        /*
        * map
        * 说明：
        * map:指“映射”，对数组中的每一项运行给定函数，返回每次函数调用的结果组成的数组。
        */
        var arr2 = arr.map(function (item) {
            return item * item;
        });
        console.log(arr2);
        /*
        * filter
        * 说明：
        * filter：过滤功能，数组中的每一项运行给定函数，返回满足过滤条件组成的数组。
        */
        var arr = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10];
        var arr2 = arr.filter(function (x, index) {
            return index % 3 === 0 || x >= 8;
        });
        console.log(arr2); //[1, 4, 7, 8, 9, 10]
        /*
        * every
        * 说明：
        * every：判断数组中每一项都是否满足条件，只有所有项都满足条件，才会返回true。
        */
        //demo ignore
        /*
        * some
        * 说明：
        * some：判断数组中存在一项满足条件，返回true。
        */
        /*
        * reduce & reduceRight
        * 说明：
        * 这两个方法都会实现迭代数组的所有项，然后构建一个最终返回的值。reduce()方法从数组的第一项开始，逐个遍历到最后。而 reduceRight()则从数组的最后一项开始，向前遍历到第一项。
        * 这两个方法都接收两个参数：一个在每一项上调用的函数和（可选的）作为归并基础的初始值。
        */
        console.log("reduce");
        arr = [1,2,3,4,5];
        var sumVal = arr.reduce(function(prev,cur,index,array){
            console.log(index);
            return prev+cur;
        },10);
        console.log(sumVal);
        //
        <a href="http://www.jb51.net/article/81511.htm">JavaScript学习笔记之ES6数组方法</a>
    </script>
</body>

</html>